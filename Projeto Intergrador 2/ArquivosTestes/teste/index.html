<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Tabela de Ciclos e Capacidades</title>
  <style>
    /* Estilo básico para modal e tabela */
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.5);
      justify-content: center;
      align-items: center;
    }
    .modal-content {
      background-color: white;
      padding: 20px;
      width: 50%;
      border-radius: 8px;
    }
    .table1, th, td {
      border: 1px solid black;
      border-collapse: collapse;
      padding: 8px;
    }
    .menor, .data, .md1, .md2, .md3, .md4 {
      text-align: center;
    }
  </style>
</head>
<body>

<!-- Tabela principal -->
<table class="table1" id="table1">
  <tr>
    <th class="menor">Editar</th>
    <th class="menor">ID_linha</th>
    <th class="data">Data de Coleta</th>
    <th class="md1">Capacidade</th>
    <th class="md1">Ciclo</th>
    <th class="md2">Capacidade</th>
    <th class="md2">Ciclo</th>
    <th class="md3">Capacidade</th>
    <th class="md3">Ciclo</th>
    <th class="md4">Capacidade</th>
    <th class="md4">Ciclo</th>
  </tr>
</table>

<!-- Botão para abrir o modal -->
<button id="abrir-modalAdc">Adicionar Nova Linha</button>

<!-- Modal para adicionar informações -->
<div id="modalAdc" class="modal">
  <div class="modal-content">
    <span id="fechar-modalAdc" style="float: right; cursor: pointer;">&times;</span>
    <h2>Adicionar Nova Linha</h2>
    <form id="formModal">
      <label>Capacidade 1: <input type="text" id="cap1"></label><br>
      <label>Ciclo 1: <input type="text" id="ciclo1"></label><br>
      <label>Capacidade 2: <input type="text" id="cap2"></label><br>
      <label>Ciclo 2: <input type="text" id="ciclo2"></label><br>
      <label>Capacidade 3: <input type="text" id="cap3"></label><br>
      <label>Ciclo 3: <input type="text" id="ciclo3"></label><br>
      <label>Capacidade 4: <input type="text" id="cap4"></label><br>
      <label>Ciclo 4: <input type="text" id="ciclo4"></label><br>
      <button type="button" id="btnSalvar">Salvar</button>
    </form>
  </div>
</div>

<script>
  // Variáveis para controle
  let idLinha = 1;
  const modal = document.getElementById("modalAdc");
  const addRowButton = document.getElementById("abrir-modalAdc");
  const saveButton = document.getElementById("btnSalvar");
  const closeModal = document.getElementById("fechar-modalAdc");
  const mainTable = document.getElementById("table1");

  // Função para abrir o modal
  addRowButton.onclick = function() {
    modal.style.display = "flex";
  };

  // Função para fechar o modal
  closeModal.onclick = function() {
    modal.style.display = "none";
  };

  // Fechar o modal ao clicar fora dele
  window.onclick = function(event) {
    if (event.target == modal) {
      modal.style.display = "none";
    }
  };

  // Função para salvar as informações e adicionar nova linha na tabela
  saveButton.onclick = function() {
    const cap1 = document.getElementById("cap1").value;
    const ciclo1 = document.getElementById("ciclo1").value;
    const cap2 = document.getElementById("cap2").value;
    const ciclo2 = document.getElementById("ciclo2").value;
    const cap3 = document.getElementById("cap3").value;
    const ciclo3 = document.getElementById("ciclo3").value;
    const cap4 = document.getElementById("cap4").value;
    const ciclo4 = document.getElementById("ciclo4").value;

    const dataAtual = new Date();
    const dia = String(dataAtual.getDate()).padStart(2, '0');
    const mes = String(dataAtual.getMonth() + 1).padStart(2, '0');
    const ano = dataAtual.getFullYear();
    const dataFormatada = `${dia}/${mes}/${ano}`;

    // Criar nova linha com os dados preenchidos
    const newRow = document.createElement("tr");
    newRow.innerHTML = `
      <td class="menor"><img src="https://cdn-icons-png.flaticon.com/512/3597/3597104.png" alt="editar"></td>
      <td class="menor">${idLinha}</td>
      <td class="data">${dataFormatada}</td>
      <td class="md1">${cap1}</td>
      <td class="md1">${ciclo1}</td>
      <td class="md2">${cap2}</td>
      <td class="md2">${ciclo2}</td>
      <td class="md3">${cap3}</td>
      <td class="md3">${ciclo3}</td>
      <td class="md4">${cap4}</td>
      <td class="md4">${ciclo4}</td>
    `;

    // Adicionar a nova linha à tabela
    mainTable.appendChild(newRow);

    // Incrementar o ID da linha para a próxima entrada
    idLinha++;

    // Fechar o modal e limpar os campos do formulário
    modal.style.display = "none";
    document.getElementById("cap1").value = '';
    document.getElementById("ciclo1").value = '';
    document.getElementById("cap2").value = '';
    document.getElementById("ciclo2").value = '';
    document.getElementById("cap3").value = '';
    document.getElementById("ciclo3").value = '';
    document.getElementById("cap4").value = '';
    document.getElementById("ciclo4").value = '';
  };
</script>

</body>
</html>
